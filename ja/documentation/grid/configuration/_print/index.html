<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=ja class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=canonical type=text/html href=https://www.selenium.dev/ja/documentation/grid/configuration/><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>コンポーネントの構成 | Selenium</title>
<meta name=description content="ここでは、各コンポーネントを、共通の設定とコンポーネント固有の設定で個別に設定する方法を確認できます。
"><meta property="og:url" content="https://www.selenium.dev/ja/documentation/grid/configuration/"><meta property="og:site_name" content="Selenium"><meta property="og:title" content="コンポーネントの構成"><meta property="og:description" content="ここでは、各コンポーネントを、共通の設定とコンポーネント固有の設定で個別に設定する方法を確認できます。"><meta property="og:locale" content="ja"><meta property="og:type" content="website"><meta property="og:image" content="https://www.selenium.dev/images/selenium_4_logo.png"><meta itemprop=name content="コンポーネントの構成"><meta itemprop=description content="ここでは、各コンポーネントを、共通の設定とコンポーネント固有の設定で個別に設定する方法を確認できます。
"><meta itemprop=dateModified content="2022-12-01T21:45:21+09:00"><meta itemprop=image content="https://www.selenium.dev/images/selenium_4_logo.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.selenium.dev/images/selenium_4_logo.png"><meta name=twitter:title content="コンポーネントの構成"><meta name=twitter:description content="ここでは、各コンポーネントを、共通の設定とコンポーネント固有の設定で個別に設定する方法を確認できます。
"><link rel=preload href=/scss/main.min.259356d537fddc16a2ee106a30e8e5b6eb26cc50ed41865c32f1cbbfad79892a.css as=style><link href=/scss/main.min.259356d537fddc16a2ee106a30e8e5b6eb26cc50ed41865c32f1cbbfad79892a.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><link rel=stylesheet href=/css/prism.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3.6.0 integrity="sha512-AyDFDkYyALC5qoao077IqAOV7UC4oKCBTp+mJfjIt306AIRoBxoEZYDo0kAx/R7RbT+3EYEky1po/F1w1eQt7g==" crossorigin=anonymous><script defer data-domain=selenium.dev src=https://plausible.io/js/plausible.js></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand-lg navbar-light bg-white flex-row td-navbar"><a class=navbar-brand href=/ja/><span class=navbar-logo><svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 139.38 34"><defs><style>.cls-1{fill:#43b02a}</style></defs><title>Selenium logo green</title><path class="cls-1" d="M46.2 26.37a18.85 18.85.0 01-2.57-.2 25 25 0 01-2.74-.53v-1.39a25.31 25.31.0 002.71.53 18 18 0 002.5.2 5.51 5.51.0 003.29-.84 2.79 2.79.0 001.14-2.39 2.85 2.85.0 00-1.24-2.49A6 6 0 0048 18.55q-.78-.29-1.67-.55A15.93 15.93.0 0144 17.13a5.92 5.92.0 01-1.58-1.05 3.6 3.6.0 01-.9-1.34A5 5 0 0141.23 13a4.46 4.46.0 01.41-1.93 4.31 4.31.0 011.17-1.5 5.26 5.26.0 011.82-1A8 8 0 0147 8.28a20.51 20.51.0 014.41.57v1.42a20 20 0 00-2.23-.44 15.2 15.2.0 00-2-.15 4.86 4.86.0 00-3.08.9A2.9 2.9.0 0042.88 13a3.25 3.25.0 00.21 1.21 2.61 2.61.0 00.7 1 4.83 4.83.0 001.27.79 14.31 14.31.0 002 .68q1.11.33 2.06.71a6.21 6.21.0 011.65.94 4.09 4.09.0 011.1 1.38 4.54 4.54.0 01.4 2 4.15 4.15.0 01-1.56 3.48A7.16 7.16.0 0146.2 26.37z"/><path class="cls-1" d="M60.62 26.32a5.46 5.46.0 01-4.28-1.62A6.9 6.9.0 0154.88 20a7.8 7.8.0 011.43-5 5 5 0 014.14-1.75 4.24 4.24.0 013.47 1.43A6.48 6.48.0 0165.1 18.8q0 .54.0.92a3.22 3.22.0 01-.09.64H56.44a5.39 5.39.0 001.17 3.5A4.18 4.18.0 0060.8 25a10.52 10.52.0 001.82-.17 11.77 11.77.0 001.93-.52l.12 1.27a10.68 10.68.0 01-2 .55A11.47 11.47.0 0160.62 26.32zM60.4 14.43q-3.68.0-3.94 4.74h7.15a6.49 6.49.0 00-.78-3.63A2.76 2.76.0 0060.4 14.43z"/><path class="cls-1" d="M68.64 7h1.58V26.11H68.64z"/><path class="cls-1" d="M79.56 26.32a5.46 5.46.0 01-4.28-1.62A6.9 6.9.0 0173.83 20a7.8 7.8.0 011.43-5 5 5 0 014.14-1.75 4.24 4.24.0 013.47 1.43A6.48 6.48.0 0184 18.8q0 .54.0.92a3.22 3.22.0 01-.09.64H75.38a5.4 5.4.0 001.17 3.5A4.18 4.18.0 0079.75 25a10.52 10.52.0 001.82-.17 11.8 11.8.0 001.93-.52l.12 1.27a10.68 10.68.0 01-2 .55A11.47 11.47.0 0179.56 26.32zm-.21-11.89q-3.68.0-3.94 4.74h7.15a6.49 6.49.0 00-.78-3.63A2.76 2.76.0 0079.35 14.43z"/><path class="cls-1" d="M87.51 13.37h1.32l.12 1.49h.12q.94-.45 1.72-.78t1.43-.54a8.42 8.42.0 011.2-.31 6.54 6.54.0 011.1-.09A3.3 3.3.0 0197 14a3.63 3.63.0 01.83 2.63v9.51H96.24v-9a3 3 0 00-.55-2 2.18 2.18.0 00-1.69-.6 7.25 7.25.0 00-2.24.41 20.1 20.1.0 00-2.67 1.12v10H87.51z"/><path class="cls-1" d="M102.75 10.52a.93.93.0 01-1.06-1 1.06 1.06.0 012.12.0.93.93.0 01-1.06 1zm-.8 2.85h1.58V26.11h-1.58z"/><path class="cls-1" d="M110.81 26.34q-3.14.0-3.14-3.47v-9.5h1.58v9a3.16 3.16.0 00.48 2 1.92 1.92.0 001.59.6 6.83 6.83.0 002.48-.48q1.25-.48 2.59-1.14V13.37H118V26.11h-1.32l-.12-1.58h-.09l-1.73.81q-.74.34-1.38.57a7.9 7.9.0 01-1.23.33A7.34 7.34.0 01110.81 26.34z"/><path class="cls-1" d="M122.18 13.37h1.3l.14 1.49h.09a19.53 19.53.0 012.58-1.31 5.51 5.51.0 012-.41 2.83 2.83.0 013 1.77h.12q.8-.5 1.45-.83a12.61 12.61.0 011.2-.54 6.17 6.17.0 011-.31 5.18 5.18.0 011-.09 3.3 3.3.0 012.45.84 3.63 3.63.0 01.83 2.63v9.51h-1.56v-9a2.9 2.9.0 00-.55-2 2.21 2.21.0 00-1.69-.59 5.14 5.14.0 00-1.78.38A14.45 14.45.0 00131.6 16v10.1H130v-9a2.9 2.9.0 00-.55-2 2.21 2.21.0 00-1.69-.59 5.24 5.24.0 00-1.86.4A14 14 0 00123.76 16V26.11h-1.58z"/><path class="cls-1" d="M21.45 21.51a2.49 2.49.0 00-2.55 2.21.08.08.0 00.08.1h4.95a.08.08.0 00.08-.09 2.41 2.41.0 00-2.56-2.22z"/><path class="cls-1" d="M32.06 4.91 21.56 16.7a.32.32.0 01-.47.0l-5.36-5.53a.32.32.0 010-.4L17.5 8.5a.32.32.0 01.52.0l3 3.32a.32.32.0 00.49.0L29.87.36A.23.23.0 0029.69.0H.25A.25.25.0 000 .25v33.5A.25.25.0 00.25 34h32a.25.25.0 00.25-.25V5.06A.23.23.0 0032.06 4.91zm-23 25.36a8.08 8.08.0 01-5.74-2 .31.31.0 010-.41l1.25-1.75A.31.31.0 015 26a6.15 6.15.0 004.2 1.64c1.64.0 2.44-.76 2.44-1.56.0-2.48-8.08-.78-8.08-6.06.0-2.33 2-4.27 5.32-4.27a7.88 7.88.0 015.25 1.76.31.31.0 010 .43L12.9 19.65a.31.31.0 01-.45.05 6.08 6.08.0 00-3.84-1.32c-1.28.0-2 .57-2 1.41.0 2.23 8.06.74 8.06 6C14.67 28.33 12.84 30.27 9.05 30.27zM26.68 25.4a.27.27.0 01-.28.28H19a.09.09.0 00-.08.1 2.81 2.81.0 003 2.32 4.62 4.62.0 002.56-.84.27.27.0 01.4.06l.9 1.31a.28.28.0 01-.06.37 6.67 6.67.0 01-4.1 1.28 5.28 5.28.0 01-5.57-5.48 5.31 5.31.0 015.4-5.46c3.11.0 5.22 2.33 5.22 5.74z"/></svg></span>
</a><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#main_navbar aria-controls=main_navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse justify-content-end" id=main_navbar><ul class="navbar-nav mr-4 mb-2 mb-lg-0 ps-4 ps-lg-2"><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>About</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a class=dropdown-item href=/ja/about>About Selenium</a>
<a class=dropdown-item href=/ja/project>Structure and Governance</a>
<a class=dropdown-item href=/ja/events>Events</a>
<a class=dropdown-item href=/ja/ecosystem>Ecosystem</a>
<a class=dropdown-item href=/ja/history>History</a>
<a class=dropdown-item href=/ja/getinvolved>Get Involved</a>
<a class=dropdown-item href=/ja/sponsors>Sponsors</a>
<a class=dropdown-item href=/ja/sponsor>Sponsor Us</a></div></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/ja/downloads><span>Downloads</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/ja/documentation><span>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/ja/projects><span>Projects</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/ja/support><span>Support</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/ja/blog><span>Blog</span></a></li><li class="nav-item dropdown d-none d-lg-block"><div class=dropdown><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>日本語</a><ul class=dropdown-menu><li><a class=dropdown-item href=/documentation/grid/configuration/>English</a></li><li><a class=dropdown-item href=/pt-br/documentation/grid/configuration/>Português (Brasileiro)</a></li><li><a class=dropdown-item href=/zh-cn/documentation/grid/configuration/>中文简体</a></li></ul></div></li></ul><div class=navbar-nav><div class=td-search><div class=td-search--algolia id=docsearch-1></div></div></div></div></nav><section id=announcement-banner class="alert-static g-0 row -bg-selenium-blue"><div class="container g-0" style=padding:10px><div class="row g-0 justify-content-center"><div class="alert alert-selenium-blue col-12 fade show mb-0 p-0 -bg-selenium-blue" role=alert><h4 class="alert-heading text-center m-2">Selenium Conf 2025 Call for Proposals is now open! Submissions close 01 Dec, 2024.
<a href="https://seleniumconf.com/?utm_medium=Referral&utm_source=selenium.dev&utm_campaign=cfp" target=_blank aria-pressed=true>Learn more & submit!</a></h4></div></div></div></section></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>これは、このセクションの複数ページの印刷可能なビューです。
<a href=# onclick="return print(),!1">印刷するには、ここをクリックしてください</a>.</p><p><a href=/ja/documentation/grid/configuration/>このページの通常のビューに戻る</a>.</p></div><h1 class=title>コンポーネントの構成</h1><div class=lead>ここでは、各コンポーネントを、共通の設定とコンポーネント固有の設定で個別に設定する方法を確認できます。</div><ul><li>1: <a href=#pg-12759b62a0129dd593b35c93c9ce349e>構成ヘルプ</a></li><li>2: <a href=#pg-4ed8bf1ae4585a0e8d21dbdfce81afb8>Selenium GridのCLI オプション</a></li><li>3: <a href=#pg-e617239c5efb3fbc97f69447f5ba5981>Toml オプション</a></li></ul><div class=content></div></div><div class=td-content><h1 id=pg-12759b62a0129dd593b35c93c9ce349e>1 - 構成ヘルプ</h1><div class=lead>Gridの設定に利用可能なオプション</div><div class="pageinfo pageinfo-primary"><p>ヘルプコマンドは、現在のコード実装に基づいて情報を表示します。
したがって、ドキュメントが更新されない場合に備えて、正確な情報を提供します。
それは、新しいバージョンのグリッド 4 の構成について学習する最も簡単な方法です。</p></div><h2 id=info-コマンド>Info コマンド</h2><p>info コマンドは、次のトピックに関する詳細なドキュメントを提供します。</p><ul><li>Selenium の構成</li><li>セキュリティ</li><li>セッションマップの設定</li><li>トレース</li></ul><h3 id=構成ヘルプ>構成ヘルプ</h3><p>クイック設定のヘルプと概要は、以下を実行することで提供されます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>java -jar selenium-server-&lt;version&gt;.jar info config
</span></span></code></pre></div><h3 id=セキュリティ>セキュリティ</h3><p>安全な通信とノード登録のためのグリッドサーバーの設定の詳細を取得するには、以下を実行します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>java -jar selenium-server-&lt;version&gt;.jar info security
</span></span></code></pre></div><h3 id=セッションマップの設定>セッションマップの設定</h3><p>デフォルトでは、グリッドはローカルセッションマップを使用してセッション情報を保存します。
グリッドは、Redis や JDBC-SQL がサポートするデータベースなどの追加のストレージオプションをサポートしています。
別のセッションストレージをセットアップするには、次のコマンドを使用してセットアップ手順を取得します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>java -jar selenium-server-&lt;version&gt;.jar info sessionmap
</span></span></code></pre></div><h3 id=opentelemetry-と-jaeger-を使用したトレースの設定>OpenTelemetry と Jaeger を使用したトレースの設定</h3><p>デフォルトでは、トレースは有効になっています。
トレースをエクスポートして Jaeger 経由で視覚化するには、次のコマンドを使用して手順を実行します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>java -jar selenium-server-&lt;version&gt;.jar info tracing
</span></span></code></pre></div><h2 id=seleniumgrid-コマンドを一覧表示する>SeleniumGrid コマンドを一覧表示する</h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>java -jar selenium-server-&lt;version&gt;.jar --config-help
</span></span></code></pre></div><p>使用可能なすべてのコマンドとそれぞれの説明が表示されます。</p><h2 id=コンポーネントヘルプコマンド>コンポーネントヘルプコマンド</h2><p>Selenium ロールの後に–help config オプションを渡して、コンポーネント固有の構成情報を取得します。</p><h3 id=スタンドアロン>スタンドアロン</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>java -jar selenium-server-&lt;version&gt;.jar standalone --help
</span></span></code></pre></div><h3 id=ハブ>ハブ</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>java -jar selenium-server-&lt;version&gt;.jar hub --help
</span></span></code></pre></div><h3 id=セッション>セッション</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>java -jar selenium-server-&lt;version&gt;.jar sessions --help
</span></span></code></pre></div><h3 id=新規セッションキュー>新規セッションキュー</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>java -jar selenium-server-&lt;version&gt;.jar sessionqueue --help
</span></span></code></pre></div><h3 id=ディストリビューター>ディストリビューター</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>java -jar selenium-server-&lt;version&gt;.jar distributor --help
</span></span></code></pre></div><h3 id=ルーター>ルーター</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>java -jar selenium-server-&lt;version&gt;.jar router --help
</span></span></code></pre></div><h3 id=ノード>ノード</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>java -jar selenium-server-&lt;version&gt;.jar node --help
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-4ed8bf1ae4585a0e8d21dbdfce81afb8>2 - Selenium GridのCLI オプション</h1><div class=lead>全てのGridコンポーネントのCLIオプション詳細</div><p>Grid の設定には、さまざまなセクションが用意されています。
各セクションには、コマンドライン引数で設定可能なオプションがあります。コマンドライン引数で設定できます。</p><p>コンポーネントとセクションの対応は以下の通りです。</p><div class="pageinfo pageinfo-primary"><p>オプションが変更、または追加されたが文書化されていない場合、
このドキュメントは古くなる可能性があることに注意してください。
もしそのような状況を見つけたら、<a href=https://www.selenium.dev/ja/documentation/grid/configuration/help/>&ldquo;構成ヘルプ&rdquo;</a>を確認し、
ドキュメントを更新するプルリクエストを気軽に送ってください。</p></div><h2 id=セクション>セクション</h2><table class="table table-bordered text-md-center d-md-table-cell"><thead><tr><th></th><th>スタンドアロン</th><th>ハブ</th><th>ノード</th><th>ディストリビューター</th><th>ルーター</th><th>セッション</th><th>新規セッションキュー</th></tr></thead><tbody><tr><th><a href=#distributor>Distributor</a></th><td><i class="fas fa-check"></i></td><td><i class="fas fa-check"></i></td><td></td><td><i class="fas fa-check"></i></td><td><i class="fas fa-check"></i></td><td></td><td></td></tr><tr><th><a href=#docker>Docker</a></th><td><i class="fas fa-check"></i></td><td></td><td><i class="fas fa-check"></i></td><td></td><td></td><td></td><td></td></tr><tr><th><a href=#events>Events</a></th><td></td><td><i class="fas fa-check"></i></td><td><i class="fas fa-check"></i></td><td><i class="fas fa-check"></i></td><td></td><td><i class="fas fa-check"></i></td><td><i class="fas fa-check"></i></td></tr><tr><th><a href=#logging>Logging</a></th><td><i class="fas fa-check"></i></td><td><i class="fas fa-check"></i></td><td><i class="fas fa-check"></i></td><td><i class="fas fa-check"></i></td><td><i class="fas fa-check"></i></td><td><i class="fas fa-check"></i></td><td><i class="fas fa-check"></i></td></tr><tr><th><a href=#network>Network</a></th><td><i class="fas fa-check"></i></td><td><i class="fas fa-check"></i></td><td></td><td></td><td><i class="fas fa-check"></i></td><td></td><td></td></tr><tr><th><a href=#node>Node</a></th><td><i class="fas fa-check"></i></td><td></td><td><i class="fas fa-check"></i></td><td></td><td></td><td></td><td></td></tr><tr><th><a href=#router>Router</a></th><td><i class="fas fa-check"></i></td><td><i class="fas fa-check"></i></td><td></td><td></td><td><i class="fas fa-check"></i></td><td></td><td></td></tr><tr><th><a href=#relay>Relay</a></th><td><i class="fas fa-check"></i></td><td></td><td><i class="fas fa-check"></i></td><td></td><td></td><td></td><td></td></tr><tr><th><a href=#server>Server</a></th><td><i class="fas fa-check"></i></td><td><i class="fas fa-check"></i></td><td><i class="fas fa-check"></i></td><td><i class="fas fa-check"></i></td><td><i class="fas fa-check"></i></td><td><i class="fas fa-check"></i></td><td><i class="fas fa-check"></i></td></tr><tr><th><a href=#sessionqueue>SessionQueue</a></th><td><i class="fas fa-check"></i></td><td><i class="fas fa-check"></i></td><td></td><td><i class="fas fa-check"></i></td><td><i class="fas fa-check"></i></td><td></td><td><i class="fas fa-check"></i></td></tr><tr><th><a href=#sessions>Sessions</a></th><td></td><td></td><td></td><td><i class="fas fa-check"></i></td><td><i class="fas fa-check"></i></td><td><i class="fas fa-check"></i></td><td></td></tr></tbody></table><h3 id=distributor>Distributor</h3><table><thead><tr><th>オプション</th><th>型</th><th>値/例</th><th>概要</th></tr></thead><tbody><tr><td><code>--healthcheck-interval</code></td><td>int</td><td><code>120</code></td><td>全てのノードに対してヘルスチェックを実行する頻度（秒）を指定します。これにより、サーバーは全てのノードに対して正常に ping を送信できるようになります。</td></tr><tr><td><code>--distributor</code></td><td>uri</td><td><code>http://localhost:5553</code></td><td>ディストリビューターの URL。</td></tr><tr><td><code>--distributor-host</code></td><td>string</td><td><code>localhost</code></td><td>ディストリビューターがリッスンするホスト名。</td></tr><tr><td><code>--distributor-implementation</code></td><td>string</td><td><code>org.openqa.selenium.grid.distributor.local.LocalDistributor</code></td><td>デフォルトでないディストリビューター実装の完全なクラス名。</td></tr><tr><td><code>--distributor-port</code></td><td>int</td><td><code>5553</code></td><td>ディストリビューターがリッスンするポート番号。</td></tr><tr><td><code>--reject-unsupported-caps</code></td><td>boolean</td><td><code>false</code></td><td>Grid がサポートしていない capabilities をリクエストされた時、ディストリビューターがリクエストを即座に今日できるようにします。これはオンデマンドでノードを立ち上げをしない Grid の設定に適しています。</td></tr><tr><td><code>--slot-matcher</code></td><td>string</td><td><code>org.openqa.selenium.grid.data.DefaultSlotMatcher</code></td><td>デフォルト以外で使用するスロットマッチャーの完全なクラス名。これはノードが特定のセッションをサポートできるかを判断するために使用されます。</td></tr><tr><td><code>--slot-selector</code></td><td>string</td><td><code>org.openqa.selenium.grid.distributor.selector.DefaultSlotSelector</code></td><td>デフォルト以外のスロットセレクターの完全なクラス名。これは、ノードがマッチした後ノード内のスロットを選択するために使用されます。</td></tr><tr><td><code>--newsession-threadpool-size</code></td><td>int</td><td><code>24</code></td><td>The Distributor uses a fixed-sized thread pool to create new sessions as it consumes new session requests from the queue. This allows configuring the size of the thread pool. The default value is no. of available processors * 3. Note: If the no. of threads is way greater than the available processors it will not always increase the performance. A high number of threads causes more context switching which is an expensive operation.</td></tr></tbody></table><h3 id=docker>Docker</h3><table><thead><tr><th>オプション</th><th>型</th><th>値/例</th><th>概要</th></tr></thead><tbody><tr><td><code>--docker-assets-path</code></td><td>string</td><td><code>/opt/selenium/assets</code></td><td>アセットが保存される絶対パス。</td></tr><tr><td><code>--docker-</code></td><td>string[]</td><td><code>selenium/standalone-firefox:latest '{"browserName": "firefox"}'</code></td><td>イメージとステレオタイプの capabilities を対応付ける Docker 設定 (例 `-D selenium/standalone-firefox:latest &lsquo;{&ldquo;browserName&rdquo;: &ldquo;firefox&rdquo;}&rsquo;)</td></tr><tr><td><code>--docker-devices</code></td><td>string[]</td><td><code>/dev/kvm:/dev/kvm</code></td><td>コンテナに対してデバイスを公開します。各デバイスマッピングは、ホストとコンテナの両方のデバイスへのパスを、コロンで区切って保つ必要があります。例: /device/path/in/host:/device/path/in/container</td></tr><tr><td><code>--docker-host</code></td><td>string</td><td><code>localhost</code></td><td>Docker デーモンが動作しているホスト名。</td></tr><tr><td><code>--docker-port</code></td><td>int</td><td><code>2375</code></td><td>Docker デーモンが動作しているポート名。</td></tr><tr><td><code>--docker-url</code></td><td>string</td><td><code>http://localhost:2375</code></td><td>Docker デーモンに接続するための URL。</td></tr><tr><td><code>--docker-video-image</code></td><td>string</td><td><code>selenium/video:latest</code></td><td>ビデオレコーディングが有効になっているときに利用される Docker イメージ。</td></tr><tr><td><code>--docker-host-config-keys</code></td><td>string[]</td><td><code>Dns DnsOptions DnsSearch ExtraHosts Binds</code></td><td>Specify which docker host configuration keys should be passed to browser containers. Keys name can be found in the Docker API <a href=https://docs.docker.com/engine/api/v1.41/#tag/Container/operation/ContainerCreate>documentation</a>, or by running <code>docker inspect</code> the node-docker container.</td></tr></tbody></table><h3 id=events>Events</h3><table><thead><tr><th>オプション</th><th>型</th><th>値/例</th><th>概要</th></tr></thead><tbody><tr><td><code>--bind-bus</code></td><td>boolean</td><td><code>false</code></td><td>接続をバインドするかコネクトするかを指定します。<br>true の場合、コンポーネントはイベントバスにバインドされます（イベントバスもコンポーネントによって起動されます、通常はディストリビューターとハブによって起動されます）。<br>false の場合、コンポーネントがイベントバスにコネクトします。</td></tr><tr><td><code>--events-implementation</code></td><td>string</td><td><code>org.openqa.selenium.events.zeromq.ZeroMqEventBus</code></td><td>デフォルトでないイベントバス実装の完全なクラス名。</td></tr><tr><td><code>--publish-events</code></td><td>string</td><td><code>tcp://*:4442</code></td><td>イベントをイベントバスに配信するための接続文字列。</td></tr><tr><td><code>--subscribe-events</code></td><td>string</td><td><code>tcp://*:4443</code></td><td>イベントをイベントバスから購読するための接続文字列。</td></tr></tbody></table><h3 id=logging>Logging</h3><table><thead><tr><th>オプション</th><th>型</th><th>値/例</th><th>概要</th></tr></thead><tbody><tr><td><code>--http-logs</code></td><td>boolean</td><td><code>false</code></td><td>http ログを有効にします。http ログを記録するには、トレースを有効にする必要があります。</td></tr><tr><td><code>--log-encoding</code></td><td>string</td><td><code>UTF-8</code></td><td>ログのエンコーディング。</td></tr><tr><td><code>--log</code></td><td>string</td><td>Windows パスの例:<br><code>'\path\to\file\gridlog.log'</code><br>or<br><code>'C:\path\path\to\file\gridlog.log'</code><br><br>Linux/Unix/MacOS パスの例:<br><code>'/path/to/file/gridlog.log'</code></td><td>ログを出力するファイル。OS のファイルパスと互換性があることを確認してください。</td></tr><tr><td><code>--log-level</code></td><td>string</td><td><code>“INFO”</code></td><td>ログレベル。デフォルトは INFO です。 ログレベルはこちらを参照してください。 <a href=https://docs.oracle.com/javase/7/docs/api/java/util/logging/Level.html>https://docs.oracle.com/javase/7/docs/api/java/util/logging/Level.html</a></td></tr><tr><td><code>--plain-logs</code></td><td>boolean</td><td><code>true</code></td><td>プレーンなログを使用します。</td></tr><tr><td><code>--structured-logs</code></td><td>boolean</td><td><code>false</code></td><td>構造化ログを使用します。</td></tr><tr><td><code>--tracing</code></td><td>boolean</td><td><code>true</code></td><td>トレースを有効にします。</td></tr><tr><td><code>--log-timestamp-format</code></td><td>string</td><td><code>HH:mm:ss.SSS</code></td><td>ログのタイムスタンプ形式を設定できます。</td></tr></tbody></table><h3 id=network>Network</h3><table><thead><tr><th>オプション</th><th>型</th><th>値/例</th><th>概要</th></tr></thead><tbody><tr><td><code>--relax-checks</code></td><td>boolean</td><td><code>false</code></td><td>受信リクエストのオリジンヘッダーとコンテンツタイプに対する、厳格な W3C 準拠の検証をを緩和します。</td></tr></tbody></table><h3 id=node>Node</h3><table><thead><tr><th>オプション</th><th>型</th><th>値/例</th><th>概要</th></tr></thead><tbody><tr><td><code>--detect-drivers</code></td><td>boolean</td><td><code>true</code></td><td>現在のシステム上で利用可能なドライバーを自動で検出してノードに追加します。</td></tr><tr><td><code>--driver-configuration</code></td><td>string[]</td><td><code>display-name="Firefox Nightly" max-sessions=2 webdriver-path="/usr/local/bin/geckodriver" stereotype="{\"browserName\": \"firefox\", \"browserVersion\": \"86\", \"moz:firefoxOptions\": {\"binary\":\"/Applications/Firefox Nightly.app/Contents/MacOS/firefox-bin\"}}"</code></td><td>ノードがサポートするドライバーの一覧。可読性向上のため TOML ファイルで設定することを推奨します。</td></tr><tr><td><code>--driver-factory</code></td><td>string[]</td><td><code>org.openqa.selenium.example.LynxDriverFactory '{"browserName": "lynx"}'</code></td><td>完全修飾クラス名と、そのクラスが対応するブラウザの設定とのマッピング。</td></tr><tr><td><code>--driver-implementation</code></td><td>string[]</td><td><code>"firefox"</code></td><td>チェックされるドライバー。指定された場合、自動設定はスキップされます。</td></tr><tr><td><code>--node-implementation</code></td><td>string</td><td><code>"org.openqa.selenium.grid.node.local.LocalNodeFactory"</code></td><td>デフォルトでないノード実装の完全なクラス名。これはセッションのライフサイクルを管理するために使用されます。</td></tr><tr><td><code>--grid-url</code></td><td>string</td><td><code>https://grid.example.com</code></td><td>Grid 全体のパブリックな URL (通常ハブかルーターのアドレスです)。</td></tr><tr><td><code>--heartbeat-period</code></td><td>int</td><td><code>60</code></td><td>ノードが生存していることを知らせるため、ノードがディストリビューターに送るハードビートを、どのくらいの頻度（秒）で送るか。</td></tr><tr><td><code>--max-sessions</code></td><td>int</td><td><code>8</code></td><td>最大同時接続セッション数。デフォルトは利用可能なプロセッサーの数です。</td></tr><tr><td><code>--override-max-sessions</code></td><td>boolean</td><td><code>false</code></td><td>利用可能なプロセッサーの数は、推奨される最大セッション数（プロセッサーごとに 1 つのブラウザセッション）です。このフラグを true に設定すると、推奨される最大値を上書きすることができます。セッションの安定性と信頼性が損なわれ、ホストがリソースを使い果たす可能性があります。</td></tr><tr><td><code>--register-cycle</code></td><td>int</td><td><code>10</code></td><td>ノードがディストリビューターに初回登録を試みる頻度(秒)。</td></tr><tr><td><code>--register-period</code></td><td>int</td><td><code>120</code></td><td>ノードが初めてディストリビューターに初回登録を試みるのにかかる時間(秒)。この時間が経過すると、ノードは再登録を試みない。</td></tr><tr><td><code>--session-timeout</code></td><td>int</td><td><code>300</code></td><td>X をセッションタイムアウト(秒)としたとき、 ノード は、過去 X 秒間に何の活動もなかったセッションを自動的に終了させます。 これにより他のテストが利用できるようスロットを解放します。</td></tr><tr><td><code>--vnc-env-var</code></td><td>string[]</td><td><code>SE_START_XVFB SE_START_VNC SE_START_NO_VNC</code></td><td>VNC ストリームが利用可能かどうかを判断するために利用する環境変数。</td></tr><tr><td><code>--no-vnc-port</code></td><td>int</td><td><code>7900</code></td><td>VNC が利用可能な場合、ローカルの noVNC ストリームを取得できるポートを設定します。</td></tr><tr><td><code>--drain-after-session-count</code></td><td>int</td><td><code>1</code></td><td>X 個のセッションが実行された後に、ノードをドレインしてシャットダウンします。 Kubernetes のような環境で有用です。 0 より大きい値を指定すると、この機能が有効になります。</td></tr><tr><td><code>--hub</code></td><td>string</td><td><code>http://localhost:4444</code></td><td>ハブ・ノード構成におけるハブのアドレスを指定します。ホスト名か IP アドレスが指定できます。この場合、ハブは <code>http://hostname:4444</code> とみなされ、 <code>--grid-url</code> は同じものになります。 <code>--publish-events</code> は <code>tcp://hostname:4442</code> 、<code>--subscribe-events</code> は <code>tcp://hostname:4443</code> となります。 <code>hostname</code> にポート番号が含まれている場合は、それが <code>--grid-url</code> に使用されますが、イベントバスの URI は変更されません。これらのデフォルト値は、適切なフラグを設定することでオーバーライドすることができます。ホスト名にプロトコル(<code>https</code>のような)が含まれる場合もそれが利用されます。</td></tr><tr><td><code>--enable-cdp</code></td><td>boolean</td><td><code>true</code></td><td>Grid 内で CDP プロキシーを有効にします。もしネットワークが web socket を許可していない場合、Grid 管理者は CDP を無効にできます。デフォルトは true です。</td></tr><tr><td><code>--enable-managed-downloads</code></td><td>boolean</td><td><code>false</code></td><td>This causes the Node to auto manage files downloaded for a given session on the Node.</td></tr><tr><td><code>--selenium-manager</code></td><td>boolean</td><td><code>false</code></td><td>When drivers are not available on the current system, use Selenium Manager. False by default.</td></tr><tr><td><code>--connection-limit-per-session</code></td><td>int</td><td><code>10</code></td><td>Let X be the maximum number of websocket connections per session.This will ensure one session is not able to exhaust the connection limit of the host.</td></tr></tbody></table><h3 id=relay>Relay</h3><table><thead><tr><th>オプション</th><th>型</th><th>値/例</th><th>概要</th></tr></thead><tbody><tr><td><code>--service-url</code></td><td>string</td><td><code>http://localhost:4723</code></td><td>Appium サーバーやクラウドサービスなど、WebDriver コマンドをサポートするサービスに接続するための URL です。</td></tr><tr><td><code>--service-host</code></td><td>string</td><td><code>localhost</code></td><td>WebDriver コマンドをサポートしてるサービスが稼働しているホスト名。</td></tr><tr><td><code>--service-port</code></td><td>int</td><td><code>4723</code></td><td>WebDriver コマンドをサポートしてるサービスが稼働しているポート番号。</td></tr><tr><td><code>--service-status-endpoint</code></td><td>string</td><td><code>/status</code></td><td>WebDriver サービスの状態を問い合わせるエンドポイント、オプショナルです。HTTP 200 レスポンスが期待されます。</td></tr><tr><td><code>--service-protocol-version</code></td><td>string</td><td><code>HTTP/1.1</code></td><td>Optional, enforce a specific protocol version in HttpClient when communicating with the endpoint service status</td></tr><tr><td><code>--service-configuration</code></td><td>string[]</td><td><code>max-sessions=2 stereotype='{"browserName": "safari", "platformName": "iOS", "appium:platformVersion": "14.5"}}'</code></td><td>呼び出しの中継先となるサービスの設定。可読性向上のため、TOML ファイルで設定することを推奨します。</td></tr></tbody></table><h3 id=router>Router</h3><table><thead><tr><th>オプション</th><th>型</th><th>値/例</th><th>概要</th></tr></thead><tbody><tr><td><code>--password</code></td><td>string</td><td><code>myStrongPassword</code></td><td>クライアントがサーバーに接続する際に使用するパスワード。このパスワードとユーザー名の両方が設定されていないと使用できません。</td></tr><tr><td><code>--username</code></td><td>string</td><td><code>admin</code></td><td>クライアントがサーバーに接続する際に使用するユーザー名。このユーザー名とパスワードの両方が設定されていないと使用できません。</td></tr><tr><td><code>--sub-path</code></td><td>string</td><td><code>my_company/selenium_grid</code></td><td>A sub-path that should be considered for all user facing routes on the Hub/Router/Standalone.</td></tr><tr><td><code>--disable-ui</code></td><td>boolean</td><td><code>true</code></td><td>Disable the Grid UI.</td></tr></tbody></table><h3 id=server>Server</h3><table><thead><tr><th>オプション</th><th>型</th><th>値/例</th><th>概要</th></tr></thead><tbody><tr><td><code>--allow-cors</code></td><td>boolean</td><td><code>true</code></td><td>Selenium サーバーが任意のホストからのウェブブラウザ接続を許可するかどうか。</td></tr><tr><td><code>--host</code></td><td>string</td><td><code>localhost</code></td><td>サーバーの IP もしくはホスト名、通常自動的に決定されます。</td></tr><tr><td><code>--bind-host</code></td><td>boolean</td><td><code>true</code></td><td>サーバがホストアドレス/ホスト名にバインドするか、あるいは到達可能な URL を知らせるためだけに使用するかを指定します。複雑なネットワーク構成で、サーバが現在の IP やホスト名ではなく、 外部の IP やホスト名で自分自身を公開する場合に有用です (例: Docker コンテナ内)。</td></tr><tr><td><code>--https-certificate</code></td><td>path</td><td><code>/path/to/cert.pem</code></td><td>HTTPS のためのサーバー証明書。詳細は &ldquo;java -jar selenium-server.jar info security&rdquo; を実行してください。</td></tr><tr><td><code>--https-private-key</code></td><td>path</td><td><code>/path/to/key.pkcs8</code></td><td>HTTPS のための秘密鍵。 詳細は &ldquo;java -jar selenium-server.jar info security&rdquo; を実行してください。</td></tr><tr><td><code>--max-threads</code></td><td>int</td><td><code>24</code></td><td>リスナースレッドの最大数。デフォルトは、有効なプロセッサーの * 3 です。</td></tr><tr><td><code>--port</code></td><td>int</td><td><code>4444</code></td><td>リッスンポート。このパラメータは異なるコンポーネントによって使用されるため、デフォルトはありません。例えば、ルータ/ハブ/スタンドアロンは 4444 を使用し、ノードは 5555 を使用します。</td></tr></tbody></table><h3 id=sessionqueue>SessionQueue</h3><table><thead><tr><th>オプション</th><th>型</th><th>値/例</th><th>概要</th></tr></thead><tbody><tr><td><code>--sessionqueue</code></td><td>uri</td><td><code>http://localhost:1237</code></td><td>新規セッションキューサーバーのアドレス。</td></tr><tr><td><code>-sessionqueue-host</code></td><td>string</td><td><code>localhost</code></td><td>新規セッションキューがリッスンするホスト。</td></tr><tr><td><code>--sessionqueue-port</code></td><td>int</td><td><code>1234</code></td><td>新規セッションキューがリッスンするポート</td></tr><tr><td><code>--session-request-timeout</code></td><td>int</td><td><code>300</code></td><td>タイムアウト(秒)。 新規セッションリクエストはキューに追加され、設定された時間以上キューに残っているリクエストはタイムアウトします。</td></tr><tr><td><code>--session-retry-interval</code></td><td>int</td><td><code>5</code></td><td>リトライ間隔(秒)。すべてのスロットがビジーな場合、 新規セッションリクエストはこの時間の間隔をおいてからリトライされます。</td></tr></tbody></table><h3 id=sessions>Sessions</h3><table><thead><tr><th>オプション</th><th>型</th><th>値/例</th><th>概要</th></tr></thead><tbody><tr><td><code>--sessions</code></td><td>uri</td><td><code>http://localhost:1234</code></td><td>セッションマップサーバーのアドレス。</td></tr><tr><td><code>--sessions-host</code></td><td>string</td><td><code>localhost</code></td><td>セッションマップサーバーがリッスンするホスト。</td></tr><tr><td><code>--sessions-port</code></td><td>int</td><td><code>1234</code></td><td>セッションマップサーバーがリッスンするポート。</td></tr></tbody></table><h2 id=設定例>設定例</h2><p>上記のオプションはすべて、Grid コンポーネントを起動する際に使用することができます。
Grid の適切な設定を模索するのに利用してください。</p><div class="pageinfo pageinfo-primary"><p><a href=https://www.selenium.dev/ja/documentation/grid/configuration/toml_options/>TOML ファイル</a> を使用して Grid を設定することをおすすめします。
設定ファイルは読みやすく、コード管理できます。</p><p>必要に応じて TOML ファイルと CLI オプションを併用することができます。</p></div><h3 id=コマンドラインフラグ>コマンドラインフラグ</h3><p>コマンドラインフラグとしてオプションを渡すには、適切なコンポーネントを特定し以下のテンプレートのようにします。</p><pre tabindex=0><code>java -jar selenium-server-&lt;version&gt;.jar &lt;component&gt; --&lt;option&gt; value
</code></pre><h4 id=スタドアロン最大セッションとメインポートを設定する>スタドアロン、最大セッションとメインポートを設定する</h4><pre tabindex=0><code>java -jar selenium-server-&lt;version&gt;.jar standalone --max-sessions 4 --port 4444
</code></pre><h4 id=ハブ新規セッションリクエストのタイムアウトメインポートを設定しトレースを無効にする>ハブ、新規セッションリクエストのタイムアウト、メインポートを設定し、トレースを無効にする</h4><pre tabindex=0><code>java -jar selenium-server-&lt;version&gt;.jar hub --session-request-timeout 500 --port 3333 --tracing false
</code></pre><h4 id=ノード最大-4-セッションデバッグログポート-7777-firefox-と-edge-のみ>ノード、最大 4 セッション、デバッグログ、ポート 7777, FireFox と Edge のみ</h4><pre tabindex=0><code>java -jar selenium-server-&lt;version&gt;.jar node --max-sessions 4 --log-level &#34;fine&#34; --port 7777 --driver-implementation &#34;firefox&#34; --driver-implementation &#34;edge&#34;
</code></pre><h4 id=ディストリビューターセッションマップ新規セッションキューの-url-を指定バスを無効にする>ディストリビューター、セッションマップ・新規セッションキューの URL を指定、バスを無効にする</h4><pre tabindex=0><code>java -jar selenium-server-&lt;version&gt;.jar distributor --sessions http://localhost:5556 --sessionqueue http://localhost:5559 --bind-bus false
</code></pre><h4 id=特定ノードにカスタム-capabilities-を設定する>特定ノードにカスタム capabilities を設定する</h4><p><strong>重要:</strong> カスタム capabilities は全てのノードに設定される必要があります。
また全てのセッションリクエストに含まれなければいけません。</p><h5 id=ハブの起動>ハブの起動</h5><pre tabindex=0><code>java -jar selenium-server-&lt;version&gt;.jar hub
</code></pre><h5 id=customcap-に-true-をセットしてノード-a-を起動する>customcap に <code>true</code> をセットしてノード A を起動する</h5><pre tabindex=0><code>java -jar selenium-server-&lt;version&gt;.jar node --detect-drivers false --driver-configuration display-name=&#34;Chrome (custom capability true)&#34; max-sessions=1 stereotype=&#39;{&#34;browserName&#34;:&#34;chrome&#34;,&#34;gsg:customcap&#34;:true}&#39; --port 6161
</code></pre><h5 id=customcap-に-false-をセットしてノード-b-を起動する>customcap に <code>false</code> をセットしてノード B を起動する</h5><pre tabindex=0><code>java -jar selenium-server-&lt;version&gt;.jar node --detect-drivers false --driver-configuration display-name=&#34;Chrome (custom capability true)&#34; max-sessions=1 stereotype=&#39;{&#34;browserName&#34;:&#34;chrome&#34;,&#34;gsg:customcap&#34;:false}&#39; --port 6262
</code></pre><h5 id=ノード-a-とマッチ>ノード A とマッチ</h5><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>ChromeOptions</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>options</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ChromeOptions</span><span style=color:#000;font-weight:700>();</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>options</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>setCapability</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;gsg:customcap&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>WebDriver</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>driver</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>RemoteWebDriver</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>URL</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;http://localhost:4444&#34;</span><span style=color:#000;font-weight:700>),</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>options</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>driver</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;https://selenium.dev&#34;</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>driver</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>quit</span><span style=color:#000;font-weight:700>();</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>ノード B とマッチさせるにはカスタム capability を <code>false</code> に設定します。</p><h4 id=enabling-managed-downloads-by-the-node>Enabling Managed downloads by the Node</h4><p>At times a test may need to access files that were downloaded by it on the Node.
To retrieve such files, following can be done.</p><h5 id=start-the-hub>Start the Hub</h5><pre tabindex=0><code>java -jar selenium-server-&lt;version&gt;.jar hub
</code></pre><h5 id=start-the-node-with-manage-downloads-enabled>Start the Node with manage downloads enabled</h5><pre tabindex=0><code>java -jar selenium-server-&lt;version&gt;.jar node --enable-managed-downloads true
</code></pre><h5 id=set-the-capability-at-the-test-level>Set the capability at the test level</h5><p>Tests that want to use this feature should set the capability <code>"se:downloadsEnabled"</code>to <code>true</code></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>options</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>setCapability</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;se:downloadsEnabled&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><h5 id=how-does-this-work>How does this work</h5><ul><li>The Grid infrastructure will try to match a session request with <code>"se:downloadsEnabled"</code> against ONLY those nodes which were started with <code>--enable-managed-downloads true</code></li><li>If a session is matched, then the Node automatically sets the required capabilities to let the browser know, as to where should a file be downloaded.</li><li>The Node now allows a user to:<ul><li>List all the files that were downloaded for a specific session and</li><li>Retrieve a specific file from the list of files.</li></ul></li><li>The directory into which files were downloaded for a specific session gets automatically cleaned up when the session ends (or) timesout due to inactivity.</li></ul><p><strong>Note: Currently this capability is ONLY supported on:</strong></p><ul><li><code>Edge</code></li><li><code>Firefox</code> and</li><li><code>Chrome</code> browser</li></ul><h5 id=listing-files-that-can-be-downloaded-for-current-session>Listing files that can be downloaded for current session:</h5><ul><li>The endpoint to <code>GET</code> from is <code>/session/&lt;sessionId>/se/files</code>.</li><li>The session needs to be active in order for the command to work.</li><li>The raw response looks like below:</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;value&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;names&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>      <span style=color:#4e9a06>&#34;Red-blue-green-channel.jpg&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>In the response the list of file names appear under the key <code>names</code>.</p><h5 id=dowloading-a-file>Dowloading a file:</h5><ul><li>The endpoint to <code>POST</code> from is <code>/session/&lt;sessionId>/se/files</code> with a payload of the form <code>{"name": "fileNameGoesHere}</code></li><li>The session needs to be active in order for the command to work.</li><li>The raw response looks like below:</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;value&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;filename&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Red-blue-green-channel.jpg&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;contents&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Base64EncodedStringContentsOfDownloadedFileAsZipGoesHere&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><ul><li>The response blob contains two keys,<ul><li><code>filename</code> - The file name that was downloaded.</li><li><code>contents</code> - Base64 encoded zipped contents of the file.</li></ul></li><li>The file contents are Base64 encoded and they need to be unzipped.</li></ul><h5 id=list-files-that-can-be-downloaded>List files that can be downloaded</h5><p>The below mentioned <code>curl</code> example can be used to list all the files that were downloaded by the current session in the Node, and which can be retrieved locally.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -X GET <span style=color:#4e9a06>&#34;http://localhost:4444/session/90c0149a-2e75-424d-857a-e78734943d4c/se/files&#34;</span>
</span></span></code></pre></div><p>A sample response would look like below:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;value&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;names&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>      <span style=color:#4e9a06>&#34;Red-blue-green-channel.jpg&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h5 id=retrieve-a-downloaded-file>Retrieve a downloaded file</h5><p>Assuming the downloaded file is named <code>Red-blue-green-channel.jpg</code>, and using <code>curl</code>, the
file could be downloaded with the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -H <span style=color:#4e9a06>&#34;Accept: application/json&#34;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>-H <span style=color:#4e9a06>&#34;Content-Type: application/json; charset=utf-8&#34;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>-X POST -d <span style=color:#4e9a06>&#39;{&#34;name&#34;:&#34;Red-blue-green-channel.jpg&#34;}&#39;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span><span style=color:#4e9a06>&#34;http://localhost:4444/session/18033434-fa4f-4d11-a7df-9e6d75920e19/se/files&#34;</span>
</span></span></code></pre></div><p>A sample response would look like below:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;value&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;filename&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Red-blue-green-channel.jpg&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;contents&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;UEsDBBQACAgIAJpagVYAAAAAAAAAAAAAAAAaAAAAUmVkLWJsAAAAAAAAAAAAUmVkLWJsdWUtZ3JlZW4tY2hhbm5lbC5qcGdQSwUGAAAAAAEAAQBIAAAAcNkAAAAA&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h5 id=complete-sample-code-in-java>Complete sample code in Java</h5><p>Below is an example in Java that does the following:</p><ul><li>Sets the capability to indicate that the test requires automatic managing of downloaded files.</li><li>Triggers a file download via a browser.</li><li>Lists the files that are available for retrieval from the remote node (These are essentially files that were downloaded in the current session)</li><li>Picks one file and downloads the file from the remote node to the local machine.</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>com.google.common.collect.ImmutableMap</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>import</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>org.openqa.selenium.By</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>import</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>org.openqa.selenium.io.Zip</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>import</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>org.openqa.selenium.json.Json</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>import</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>org.openqa.selenium.remote.RemoteWebDriver</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>import</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>org.openqa.selenium.remote.http.HttpClient</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>import</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>org.openqa.selenium.remote.http.HttpRequest</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>import</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>org.openqa.selenium.remote.http.HttpResponse</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>import</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>java.io.File</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>import</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>java.net.URL</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>import</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>java.nio.file.Files</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>import</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>java.util.List</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>import</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>java.util.Map</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>import</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>java.util.Optional</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>import</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>java.util.concurrent.TimeUnit</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>import static</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>org.openqa.selenium.remote.http.Contents.asJson</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>import static</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>org.openqa.selenium.remote.http.Contents.string</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>import static</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>org.openqa.selenium.remote.http.HttpMethod.GET</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>import static</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>org.openqa.selenium.remote.http.HttpMethod.POST</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>public</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>DownloadsSample</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>public</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>static</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>void</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>main</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>String</span><span style=color:#ce5c00;font-weight:700>[]</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>args</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>throws</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Exception</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic>// Assuming the Grid is running locally.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>URL</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>gridUrl</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>URL</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;http://localhost:4444&#34;</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>ChromeOptions</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>options</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ChromeOptions</span><span style=color:#000;font-weight:700>();</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>options</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>setCapability</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;se:downloadsEnabled&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>RemoteWebDriver</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>driver</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>RemoteWebDriver</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>gridUrl</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>options</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>try</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#000>demoFileDownloads</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>driver</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>gridUrl</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>finally</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#000>driver</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>quit</span><span style=color:#000;font-weight:700>();</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>	</span><span style=color:#204a87;font-weight:700>private</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>static</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>void</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>demoFileDownloads</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>RemoteWebDriver</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>driver</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>URL</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>gridUrl</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>throws</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Exception</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>		</span><span style=color:#000>driver</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;https://www.selenium.dev/selenium/web/downloads/download.html&#34;</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>		</span><span style=color:#8f5902;font-style:italic>// Download the two available files on the page</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>		</span><span style=color:#000>driver</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>findElement</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>By</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>id</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;file-1&#34;</span><span style=color:#000;font-weight:700>)).</span><span style=color:#c4a000>click</span><span style=color:#000;font-weight:700>();</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>		</span><span style=color:#000>driver</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>findElement</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>By</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>id</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;file-2&#34;</span><span style=color:#000;font-weight:700>)).</span><span style=color:#c4a000>click</span><span style=color:#000;font-weight:700>();</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>		</span><span style=color:#8f5902;font-style:italic>// The download happens in a remote Node, which makes it difficult to know when the file</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>		</span><span style=color:#8f5902;font-style:italic>// has been completely downloaded. For demonstration purposes, this example uses a</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>		</span><span style=color:#8f5902;font-style:italic>// 10-second sleep which should be enough time for a file to be downloaded.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>		</span><span style=color:#8f5902;font-style:italic>// We strongly recommend to avoid hardcoded sleeps, and ideally, to modify your</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>		</span><span style=color:#8f5902;font-style:italic>// application under test, so it offers a way to know when the file has been completely</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>		</span><span style=color:#8f5902;font-style:italic>// downloaded.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>		</span><span style=color:#000>TimeUnit</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>SECONDS</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>sleep</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>10</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>		</span><span style=color:#8f5902;font-style:italic>//This is the endpoint which will provide us with list of files to download and also to</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>		</span><span style=color:#8f5902;font-style:italic>//let us download a specific file.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>		</span><span style=color:#000>String</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>downloadsEndpoint</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>String</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>format</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;/session/%s/se/files&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>driver</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>getSessionId</span><span style=color:#000;font-weight:700>());</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>		</span><span style=color:#000>String</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>fileToDownload</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>		</span><span style=color:#204a87;font-weight:700>try</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>(</span><span style=color:#000>HttpClient</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>client</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>HttpClient</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>Factory</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>createDefault</span><span style=color:#000;font-weight:700>().</span><span style=color:#c4a000>createClient</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>gridUrl</span><span style=color:#000;font-weight:700>))</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#8f5902;font-style:italic>// To list all files that are were downloaded on the remote node for the current session</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#8f5902;font-style:italic>// we trigger GET request.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#000>HttpRequest</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>request</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>HttpRequest</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>GET</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>downloadsEndpoint</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#000>HttpResponse</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>response</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>execute</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>request</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#000>Map</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>String</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Object</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>jsonResponse</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Json</span><span style=color:#000;font-weight:700>().</span><span style=color:#c4a000>toType</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>string</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>response</span><span style=color:#000;font-weight:700>),</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Json</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>MAP_TYPE</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#5c35cc;font-weight:700>@SuppressWarnings</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;unchecked&#34;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#000>Map</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>String</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Object</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>value</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Map</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>String</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Object</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>jsonResponse</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;value&#34;</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#5c35cc;font-weight:700>@SuppressWarnings</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;unchecked&#34;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#000>List</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>String</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>names</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>(</span><span style=color:#000>List</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>String</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>value</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;names&#34;</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#8f5902;font-style:italic>// Let&#39;s say there were &#34;n&#34; files downloaded for the current session, we would like</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#8f5902;font-style:italic>// to retrieve ONLY the first file.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#000>fileToDownload</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>names</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>0</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>		</span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>		</span><span style=color:#8f5902;font-style:italic>// Now, let&#39;s download the file</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>		</span><span style=color:#204a87;font-weight:700>try</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>(</span><span style=color:#000>HttpClient</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>client</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>HttpClient</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>Factory</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>createDefault</span><span style=color:#000;font-weight:700>().</span><span style=color:#c4a000>createClient</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>gridUrl</span><span style=color:#000;font-weight:700>))</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#8f5902;font-style:italic>// To retrieve a specific file from one or more files that were downloaded by the current session</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#8f5902;font-style:italic>// on a remote node, we use a POST request.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#000>HttpRequest</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>request</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>HttpRequest</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>POST</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>downloadsEndpoint</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#000>request</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>setContent</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>asJson</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ImmutableMap</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>of</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;name&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>fileToDownload</span><span style=color:#000;font-weight:700>)));</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#000>HttpResponse</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>response</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>execute</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>request</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#000>Map</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>String</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Object</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>jsonResponse</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Json</span><span style=color:#000;font-weight:700>().</span><span style=color:#c4a000>toType</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>string</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>response</span><span style=color:#000;font-weight:700>),</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Json</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>MAP_TYPE</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#5c35cc;font-weight:700>@SuppressWarnings</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;unchecked&#34;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#000>Map</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>String</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Object</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>value</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Map</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>String</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Object</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>jsonResponse</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;value&#34;</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#8f5902;font-style:italic>// The returned map would contain 2 keys,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#8f5902;font-style:italic>// filename - This represents the name of the file (same as what was provided by the test)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#8f5902;font-style:italic>// contents - Base64 encoded String which contains the zipped file.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#000>String</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>zippedContents</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>value</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;contents&#34;</span><span style=color:#000;font-weight:700>).</span><span style=color:#c4a000>toString</span><span style=color:#000;font-weight:700>();</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#8f5902;font-style:italic>// The file contents would always be a zip file and has to be unzipped.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#000>File</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>downloadDir</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Zip</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>unzipToTempDir</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>zippedContents</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;download&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#8f5902;font-style:italic>// Read the file contents</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#000>File</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>downloadedFile</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Optional</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>ofNullable</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>downloadDir</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>listFiles</span><span style=color:#000;font-weight:700>()).</span><span style=color:#c4a000>orElse</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>File</span><span style=color:#ce5c00;font-weight:700>[]</span><span style=color:#000;font-weight:700>{})</span><span style=color:#ce5c00;font-weight:700>[</span><span style=color:#000>0</span><span style=color:#ce5c00;font-weight:700>]</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#000>String</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>fileContent</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>String</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>join</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Files</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>readAllLines</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>downloadedFile</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>toPath</span><span style=color:#000;font-weight:700>()));</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>			</span><span style=color:#000>System</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>out</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>println</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;The file which was &#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>					</span><span style=color:#ce5c00;font-weight:700>+</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;downloaded in the node is now available in the directory: &#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>					</span><span style=color:#ce5c00;font-weight:700>+</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>downloadDir</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>getAbsolutePath</span><span style=color:#000;font-weight:700>()</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>+</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34; and has the contents: &#34;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>+</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>fileContent</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>		</span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>	</span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-e617239c5efb3fbc97f69447f5ba5981>3 - Toml オプション</h1><div class=lead>Tomlファイルを使用したGridの設定例.</div><p><a href=https://www.selenium.dev/ja/documentation/grid/configuration/cli_options/>CLI オプション</a> に記載されている全てのオプションは
<a href=https://github.com/toml-lang/toml>TOML</a> ファイルでも設定ができます。
このページでは異なる Grid コンポーネントの設定例を紹介します。</p><div class="pageinfo pageinfo-primary"><p>オプションが変更、または追加されたが文書化されていない場合、
このドキュメントは古くなる可能性があることに注意してください。
もしそのような状況を見つけたら、<a href=https://www.selenium.dev/ja/documentation/grid/configuration/help/>&ldquo;構成ヘルプ&rdquo;</a>を確認し、
ドキュメントを更新するプルリクエストを気軽に送ってください。</p></div><h2 id=概要>概要</h2><p>Selenium Grid は<a href=https://github.com/toml-lang/toml>TOML</a>フォーマットの設定ファイルを使用します。
設定ファイルはセクションで構成され、各セクションはオプションとその値が設定されています。</p><p>詳しい使い方は<a href=https://toml.io/ja/>TOML ドキュメント</a>を参照してください。
パースエラーに遭遇した場合、<a href=https://www.toml-lint.com/>TOML リンター</a>を使って検証してください。</p><p>一般的な設定の構成は以下のパターンです:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span><span style=color:#000;font-weight:700>[</span><span style=color:#000>section1</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000>option1</span><span style=color:#000;font-weight:700>=</span><span style=color:#4e9a06>&#34;value&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>[</span><span style=color:#000>section2</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000>option2</span><span style=color:#000;font-weight:700>=[</span><span style=color:#4e9a06>&#34;value1&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#4e9a06>&#34;value2&#34;</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000>option3</span><span style=color:#000;font-weight:700>=</span><span style=color:#204a87;font-weight:700>true</span>
</span></span></code></pre></div><p>TOML ファイルで設定された Grid コンポーネントを起動するには以下のように起動できます:</p><pre tabindex=0><code>java -jar selenium-server-&lt;version&gt;.jar &lt;component&gt; --config /path/to/file/&lt;file-name&gt;.toml
</code></pre><h3 id=スタンドアロン>スタンドアロン</h3><p>ポート 4449 で動作し、新規セッションリクエストのタイムアウトが 500 秒のスタンドアロンサーバー。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span><span style=color:#000;font-weight:700>[</span><span style=color:#000>server</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000>port</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4449</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>[</span><span style=color:#000>sessionqueue</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000>session-request-timeout</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>500</span>
</span></span></code></pre></div><h3 id=特定のブラウザとセッションの上限>特定のブラウザとセッションの上限</h3><p>Firefox と Chrome のみがデフォルトで有効になっているスタンドアロンサーバー、またはノード</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span><span style=color:#000;font-weight:700>[</span><span style=color:#000>node</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000>drivers</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;chrome&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;firefox&#34;</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000>max-sessions</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span>
</span></span></code></pre></div><h3 id=ドライバーのカスタマイズと設定>ドライバーのカスタマイズと設定</h3><p>Firefox Beta や Nightly のような、異なるブラウザのバージョンを持つことができるカスタマイズされた
ドライバを用いた、スタンドアロン、またはノード。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span><span style=color:#000;font-weight:700>[</span><span style=color:#000>node</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000>detect-drivers</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>false</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>[[</span><span style=color:#000>node</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>driver-configuration</span><span style=color:#000;font-weight:700>]]</span>
</span></span><span style=display:flex><span><span style=color:#000>max-sessions</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>100</span>
</span></span><span style=display:flex><span><span style=color:#000>display-name</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Firefox Nightly&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>stereotype</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;{\&#34;browserName\&#34;: \&#34;firefox\&#34;, \&#34;browserVersion\&#34;: \&#34;93\&#34;, \&#34;platformName\&#34;: \&#34;MAC\&#34;, \&#34;moz:firefoxOptions\&#34;: {\&#34;binary\&#34;: \&#34;/Applications/Firefox Nightly.app/Contents/MacOS/firefox-bin\&#34;}}&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>[[</span><span style=color:#000>node</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>driver-configuration</span><span style=color:#000;font-weight:700>]]</span>
</span></span><span style=display:flex><span><span style=color:#000>display-name</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Chrome Beta&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>stereotype</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;{\&#34;browserName\&#34;: \&#34;chrome\&#34;, \&#34;browserVersion\&#34;: \&#34;94\&#34;, \&#34;platformName\&#34;: \&#34;MAC\&#34;, \&#34;goog:chromeOptions\&#34;: {\&#34;binary\&#34;: \&#34;/Applications/Google Chrome Beta.app/Contents/MacOS/Google Chrome Beta\&#34;}}&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>[[</span><span style=color:#000>node</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>driver-configuration</span><span style=color:#000;font-weight:700>]]</span>
</span></span><span style=display:flex><span><span style=color:#000>display-name</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Chrome Dev&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>stereotype</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;{\&#34;browserName\&#34;: \&#34;chrome\&#34;, \&#34;browserVersion\&#34;: \&#34;95\&#34;, \&#34;platformName\&#34;: \&#34;MAC\&#34;, \&#34;goog:chromeOptions\&#34;: {\&#34;binary\&#34;: \&#34;/Applications/Google Chrome Dev.app/Contents/MacOS/Google Chrome Dev\&#34;}}&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>webdriver-executable</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#39;/path/to/chromedriver/95/chromedriver&#39;</span>
</span></span></code></pre></div><h3 id=docker-を利用したスタンドアロンまたはノード>Docker を利用したスタンドアロン、またはノード</h3><p>Docker コンテナでセッションを実行できるスタンドアロン、またはノードサーバー。
ドライバを検出を無効にし、最大 2 つの同時セッションを持ちます。
ステレオタイプは、Docker イメージにマッピングされる必要があり、
Docker デーモンが http/tcp で公開されている必要があります。
また、<code>devices</code>プロパティを用いて、ホスト上でアクセス可能なデバイスファイルを、コンテナで利用できるようにすることも可能です。
Docker デバイスをマッピングする詳しい方法は<a href=https://docs.docker.com/engine/reference/commandline/run/#add-host-device-to-container---device>docker</a>
を参照してください。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span><span style=color:#000;font-weight:700>[</span><span style=color:#000>node</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000>detect-drivers</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>false</span>
</span></span><span style=display:flex><span><span style=color:#000>max-sessions</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>[</span><span style=color:#000>docker</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000>configs</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;selenium/standalone-chrome:93.0&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;{\&#34;browserName\&#34;: \&#34;chrome\&#34;, \&#34;browserVersion\&#34;: \&#34;91\&#34;}&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;selenium/standalone-firefox:92.0&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;{\&#34;browserName\&#34;: \&#34;firefox\&#34;, \&#34;browserVersion\&#34;: \&#34;92\&#34;}&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#Optionally define all device files that should be mapped to docker containers</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#devices = [</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#    &#34;/dev/kvm:/dev/kvm&#34;</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#]</span>
</span></span><span style=display:flex><span><span style=color:#000>url</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;http://localhost:2375&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>video-image</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;selenium/video:latest&#34;</span>
</span></span></code></pre></div><h3 id=webdriver-をサポートするサービスエンドポイントへのコマンド中継>WebDriver をサポートするサービスエンドポイントへのコマンド中継</h3><p>WebDriver をサポートする外部サービスを Selenium Grid に接続すると便利です。
例えばクラウドプロバイダーや Appium サーバーなどです。
Grid はローカルに存在しないプラットフォームやバージョンなどを幅広くカバーできるようになります。</p><p>以下は Appium サーバーを Grid に接続する例です。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span><span style=color:#000;font-weight:700>[</span><span style=color:#000>node</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000>detect-drivers</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>[</span><span style=color:#000>relay</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Default Appium/Cloud server endpoint</span>
</span></span><span style=display:flex><span><span style=color:#000>url</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;http://localhost:4723/wd/hub&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>status-endpoint</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;/status&#34;</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Optional, enforce a specific protocol version in HttpClient when communicating with the endpoint service status (e.g. HTTP/1.1, HTTP/2)</span>
</span></span><span style=display:flex><span><span style=color:#000>protocol-version</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;HTTP/1.1&#34;</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Stereotypes supported by the service. The initial number is &#34;max-sessions&#34;, and will allocate</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># that many test slots to that particular configuration</span>
</span></span><span style=display:flex><span><span style=color:#000>configs</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>  <span style=color:#4e9a06>&#34;5&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;{\&#34;browserName\&#34;: \&#34;chrome\&#34;, \&#34;platformName\&#34;: \&#34;android\&#34;, \&#34;appium:platformVersion\&#34;: \&#34;11\&#34;}&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>]</span>
</span></span></code></pre></div><h3 id=basic-認証の有効化>Basic 認証の有効化</h3><p>ルーター、ハブ、スタンドアロンにユーザー名とパスワードを設定することで、
Basic 認証で Grid を保護することができます。
このユーザーとパスワードは、Grid UI を読み込む時や
新しいセッションを開始する時に必要になります。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span><span style=color:#000;font-weight:700>[</span><span style=color:#000>router</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000>username</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;admin&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>password</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;myStrongPassword&#34;</span>
</span></span></code></pre></div><p>Java でユーザーとパスワードを使ってセッションを開始する方法の例です。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>ClientConfig</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>clientConfig</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ClientConfig</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>defaultConfig</span><span style=color:#000;font-weight:700>()</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>baseUrl</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>URL</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;http://localhost:4444&#34;</span><span style=color:#000;font-weight:700>))</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>authenticateAs</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>UsernameAndPassword</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;admin&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;myStrongPassword&#34;</span><span style=color:#000;font-weight:700>));</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>HttpCommandExecutor</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>executor</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>HttpCommandExecutor</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>clientConfig</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>RemoteWebDriver</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>driver</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>RemoteWebDriver</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>executor</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ChromeOptions</span><span style=color:#000;font-weight:700>());</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>In other languages, you can use the URL http://admin:myStrongPassword@localhost:4444</p><h3 id=特定のノードにマッチするカスタム-capabilities-の設定>特定のノードにマッチするカスタム capabilities の設定</h3><p><strong>重要</strong>: カスタム capabilities は全てのノードで設定する必要があります。
また全てのセッションリクエストで常に含まれる必要があります。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span><span style=color:#000;font-weight:700>[</span><span style=color:#000>node</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000>detect-drivers</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>[[</span><span style=color:#000>node</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>driver-configuration</span><span style=color:#000;font-weight:700>]]</span>
</span></span><span style=display:flex><span><span style=color:#000>display-name</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;firefox&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>stereotype</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#39;{&#34;browserName&#34;: &#34;firefox&#34;, &#34;platformName&#34;: &#34;macOS&#34;, &#34;browserVersion&#34;:&#34;96&#34;, &#34;networkname:applicationName&#34;:&#34;node_1&#34;, &#34;nodename:applicationName&#34;:&#34;app_1&#34; }&#39;</span>
</span></span><span style=display:flex><span><span style=color:#000>max-sessions</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>5</span>
</span></span></code></pre></div><p>Java でノードにマッチさせる方法の例です。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>FirefoxOptions</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>options</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>FirefoxOptions</span><span style=color:#000;font-weight:700>();</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>options</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>setCapability</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;networkname:applicationName&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;node_1&#34;</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>options</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>setCapability</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;nodename:applicationName&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;app_1&#34;</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>options</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>setBrowserVersion</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;96&#34;</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>options</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>setPlatformName</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;macOS&#34;</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>WebDriver</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>driver</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>RemoteWebDriver</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>URL</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;http://localhost:4444&#34;</span><span style=color:#000;font-weight:700>),</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>options</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>driver</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;https://selenium.dev&#34;</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>driver</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>quit</span><span style=color:#000;font-weight:700>();</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><h3 id=enabling-managed-downloads-by-the-node>Enabling Managed downloads by the Node.</h3><p>The Node can be instructed to manage downloads automatically. This will cause the Node to save all files that were downloaded for a particular session into a temp directory, which can later be retrieved from the node.
To turn this capability on, use the below configuration:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span><span style=color:#000;font-weight:700>[</span><span style=color:#000>node</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000>enable-managed-downloads</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span>
</span></span></code></pre></div><p>Refer to the <a href=https://www.selenium.dev/ja/documentation/grid/configuration/cli_options/#enabling-managed-downloads-by-the-node>CLI section</a> for a complete example.</p></div></main></div></div><div class="row justify-content-center p-5"><h2 class="selenium text-center">Development Partners</h2></div><div class="row justify-content-around pt-4 pb-5 px-5"><div class="col-lg-3 col-md-6 mb-4 mb-lg-0 align-self-center px-5 py-3"><a href="https://www.browserstack.com/automate?utm_campaign=open-source-sponsor&amp;utm_campaigncode=701OW000009sQwVYAU&amp;utm_medium=partnered&amp;utm_source=seleniumorg" class=border-0><img class="w-100 shadow-1-strong rounded selenium-backer-logo" src=/images/sponsors/browserstack.png alt=BrowserStack></a></div><div class="col-lg-3 col-md-6 mb-4 mb-lg-0 align-self-center px-5 py-3"><a href="https://saucelabs.com/resources/topic-hub/selenium?utm_source=selenium&amp;utm_medium=website&amp;utm_campaign=selenium-sponsorship-fy25" class=border-0><img class="w-100 shadow-1-strong rounded selenium-backer-logo" src=/images/sponsors/saucelabs.png alt="Sauce Labs"></a></div></div><div class="row justify-content-center p-5"><h2 class="selenium text-center">Selenium Level Sponsors</h2></div><div class="row justify-content-around pt-4 pb-5 px-5"><div class="col-lg-3 col-md-6 mb-4 mb-lg-0 align-self-center px-5 py-3"><a href="https://brightdata.com/?utm_source=brand&amp;utm_campaign=brnd-mkt_partners_selenium" class=border-0><img class="w-100 shadow-1-strong rounded selenium-backer-logo" src=/images/sponsors/bright-data.png alt="Bright Data"></a></div><div class="col-lg-3 col-md-6 mb-4 mb-lg-0 align-self-center px-5 py-3"><a href=https://applitools.com/ class=border-0><img class="w-100 shadow-1-strong rounded selenium-backer-logo" src=/images/sponsors/applitools.png alt=Applitools></a></div><div class="col-lg-3 col-md-6 mb-4 mb-lg-0 align-self-center px-5 py-3"><a href="https://www.lambdatest.com/selenium-automation?utm_source=selenium&amp;utm_medium=open-source-sponsor&amp;utm_campaign=nov_14&amp;utm_term=sk&amp;utm_content=web" class=border-0><img class="w-100 shadow-1-strong rounded selenium-backer-logo" src=/images/sponsors/lambda-test.png alt=LambdaTest></a></div></div><div class="row justify-content-center pt-2 pb-3 -bg-selenium-cyan"><div class="card text-center border-0 bg-transparent py-5"><div class="card-body text-white"><h2 class=card-title>Support the Selenium Project</h2><p class=card-text>Learn more or view the full list of sponsors.</p><div class=selenium-button-container><a href=/sponsors class="selenium-button selenium-white-cyan text-uppercase fw-bold">Learn more
<i class="ps-3 fas fa-caret-right"></i></a></div></div></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title="User mailing list" aria-label="User mailing list"><a class=text-white target=_blank rel=noopener href=https://groups.google.com/group/selenium-users aria-label="User mailing list"><i class="fas fa-mail-bulk"></i></a></li><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title="Selenium in Twitter" aria-label="Selenium in Twitter"><a class=text-white target=_blank rel=noopener href=https://twitter.com/SeleniumHQ aria-label="Selenium in Twitter"><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title="SeleniumConf YouTube Channel" aria-label="SeleniumConf YouTube Channel"><a class=text-white target=_blank rel=noopener href=https://www.youtube.com/channel/UCbDlgX_613xNMrDqCe3QNEw aria-label="SeleniumConf YouTube Channel"><i class="fab fa-youtube"></i></a></li></ul></div><div class="col-6 col-sm-4 text-end text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title="Software Freedom Conservancy" aria-label="Software Freedom Conservancy"><a class=text-white target=_blank rel=noopener href=mailto:selenium@sfconservancy.org aria-label="Software Freedom Conservancy"><i class="fas fa-envelope-square"></i></a></li><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/seleniumhq/selenium aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank rel=noopener href=https://join.slack.com/t/seleniumhq/shared_invite/zt-2stlcmc6b-Hww~3r3yAzquhSq4riOFxA aria-label=Slack><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title=IRC aria-label=IRC><a class=text-white target=_blank rel=noopener href=https://kiwiirc.com/nextclient/irc.libera.chat/#selenium aria-label=IRC><i class="fas fa-comments"></i></a></li><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title="Developer mailing list" aria-label="Developer mailing list"><a class=text-white target=_blank rel=noopener href=https://groups.google.com/g/selenium-developers aria-label="Developer mailing list"><i class="fa fa-envelope"></i></a></li></ul><a href=https://www.netlify.com><img style=margin-right:50px src=https://www.netlify.com/v3/img/components/netlify-light.svg alt="Deploys by Netlify"></a></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2024 Software Freedom Conservancy All Rights Reserved</small><p class=mt-2><a href=/ja/documentation/about/>このドキュメントについて</a></p></div></div></div></footer></div><script src=/js/main.min.0a56205ed1c75268f017591e5418fdb944578a279fe7c7abe3981ebed191c341.js integrity="sha256-ClYgXtHHUmjwF1keVBj9uURXiief58er45gevtGRw0E=" crossorigin=anonymous></script><script src=/js/prism.js></script><script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3.6.0 integrity="sha512-FtDaTWf3IS29TLuYzTPlytjGqcXkwrzG9ivq7xXElnOZeiYTbcIy/hwXAgrrRNnI0+PfN+WFz4/+4phhJmuS8Q==" crossorigin=anonymous></script><script type=text/javascript>const containers=["#docsearch-0","#docsearch-1"];for(let e of containers)docsearch({container:e,appId:"6IOXA5JK7Z",apiKey:"2b44a1d3530f9951dd6502059058984a",indexName:"selenium"})</script><script src=/js/tabpane-persist.js></script></body></html>